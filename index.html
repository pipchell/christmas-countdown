<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Christmas Countdown</title>
  <link rel="preload" href="assets/LeagueSpartan-Bold.woff2" as="font" type="font/woff2" crossorigin>
  <style>
    @font-face {
      font-family: 'League Spartan';
      src: url('assets/LeagueSpartan-Bold.woff2') format('woff2'),
           url('assets/LeagueSpartan-Bold.woff') format('woff');
      font-weight: 900;
      font-style: normal;
      font-display: swap;
    }

    html, body {
      margin: 0;
      padding: 0;
      background: black;
      color: #17D860;
      font-family: 'League Spartan', sans-serif;
      font-weight: 900;
      overflow-x: hidden;
      height: 100%;
    }

    .snow {
      position: fixed;
      top: 0; left: 0;
      width: 100vw;
      height: 100vh;
      pointer-events: none;
      z-index: 0;
    }

    .container {
      position: relative;
      z-index: 10;
      height: 100vh;
      display: flex;
      flex-direction: column;
      justify-content: center;
      align-items: center;
      padding: 0 20px;
      text-align: center;
      animation: fadeIn 2s ease;
    }

    h1 {
      font-size: clamp(2.5rem, 10vw, 6rem);
      letter-spacing: 0.03em;
      margin-bottom: 3rem;
      white-space: nowrap;
    }

    .countdown {
      display: flex;
      gap: clamp(1.5rem, 4vw, 4rem);
      flex-wrap: wrap;
      justify-content: center;
      font-size: clamp(1.5rem, 5vw, 3rem);
    }

    .countdown div {
      display: flex;
      flex-direction: column;
      align-items: center;
    }

    .value {
      font-size: clamp(2.5rem, 6vw, 5rem);
    }

    .label {
      font-size: 1rem;
      text-transform: capitalize;
      color: #17D860;
      opacity: 0.7;
      margin-top: 0.25em;
    }

    @keyframes fadeIn {
      from { opacity: 0; transform: translateY(10px); }
      to { opacity: 1; transform: translateY(0); }
    }

    .btn-container {
      position: fixed;
      bottom: 1rem;
      right: 1rem;
      display: flex;
      flex-direction: column;
      gap: 0.5rem;
      z-index: 20;
    }

    .btn {
      font-family: 'League Spartan', sans-serif;
      font-weight: 900;
      background: rgba(23, 216, 96, 0.1);
      border: 1px solid #17D860;
      color: #17D860;
      padding: 0.4rem 0.7rem;
      border-radius: 5px;
      cursor: pointer;
      transition: 0.2s;
    }

    .btn:hover {
      background: rgba(23, 216, 96, 0.3);
    }

    .hidden {
      display: none;
    }

    .copied-msg {
      position: fixed;
      top: 1rem;
      left: 50%;
      transform: translateX(-50%);
      background: #17D860;
      color: black;
      padding: 0.5rem 1rem;
      border-radius: 8px;
      font-weight: 900;
      animation: fadeInOut 3s ease forwards;
      font-family: 'League Spartan', sans-serif;
      z-index: 99;
    }

    @keyframes fadeInOut {
      0% { opacity: 0; transform: translateY(-10px); }
      10% { opacity: 1; transform: translateY(0); }
      90% { opacity: 1; transform: translateY(0); }
      100% { opacity: 0; transform: translateY(-10px); }
    }

    .show-btn {
      position: fixed;
      bottom: 1rem;
      right: 1rem;
      font-family: 'League Spartan', sans-serif;
      font-size: 0.8rem;
      opacity: 0.1;
      cursor: pointer;
      z-index: 20;
    }
  </style>
</head>
<body>

<canvas class="snow"></canvas>

<div class="container">
  <h1>Christmas Countdown</h1>
  <div class="countdown">
    <div><span class="value" id="days">--</span><span class="label">Days</span></div>
    <div><span class="value" id="hours">--</span><span class="label">Hours</span></div>
    <div><span class="value" id="minutes">--</span><span class="label">Minutes</span></div>
    <div><span class="value" id="seconds">--</span><span class="label">Seconds</span></div>
  </div>
</div>

<div class="btn-container" id="buttons">
  <button class="btn" onclick="copyLink()">Copy Link</button>
  <button class="btn" onclick="toggleMusic()" id="music-btn">üîá</button>
  <button class="btn" onclick="hideButtons()">Hide Buttons</button>
</div>
<div class="show-btn hidden" id="showBtn" onclick="showButtons()">Show</div>

<div id="copied" class="copied-msg hidden">üéÑ Link Copied! üéÅ</div>

<audio id="bg-music" loop>
  <source src="https://cdn.pixabay.com/audio/2021/12/07/audio_67e1c91774.mp3" type="audio/mpeg">
</audio>

<script>
  // Countdown logic
  function updateCountdown() {
    const now = new Date();
    let year = now.getFullYear();
    const christmas = new Date(year, 11, 25);
    if (now > christmas) christmas.setFullYear(year + 1);
    const diff = christmas - now;

    const seconds = Math.floor(diff / 1000) % 60;
    const minutes = Math.floor(diff / 60000) % 60;
    const hours = Math.floor(diff / 3600000) % 24;
    const days = Math.floor(diff / 86400000);

    document.getElementById('days').textContent = days.toString().padStart(2, '0');
    document.getElementById('hours').textContent = hours.toString().padStart(2, '0');
    document.getElementById('minutes').textContent = minutes.toString().padStart(2, '0');
    document.getElementById('seconds').textContent = seconds.toString().padStart(2, '0');
  }
  setInterval(updateCountdown, 1000);
  updateCountdown();

  // Snow
  const canvas = document.querySelector('.snow');
  const ctx = canvas.getContext('2d');
  let w, h, flakes = [];

  function init() {
    w = canvas.width = window.innerWidth;
    h = canvas.height = window.innerHeight;
    flakes = [];
    for (let i = 0; i < 100; i++) {
      flakes.push({
        x: Math.random() * w,
        y: Math.random() * h,
        r: Math.random() * 4 + 1,
        d: Math.random() + 1
      });
    }
  }

  function drawFlakes() {
    ctx.clearRect(0, 0, w, h);
    ctx.fillStyle = 'rgba(255, 255, 255, 0.7)';
    ctx.beginPath();
    flakes.forEach(f => {
      ctx.moveTo(f.x, f.y);
      ctx.arc(f.x, f.y, f.r, 0, Math.PI * 2);
    });
    ctx.fill();
    moveFlakes();
  }

  function moveFlakes() {
    flakes.forEach((f, i) => {
      f.y += Math.pow(f.d, 2) + 1;
      f.x += Math.sin(i);
      if (f.y > h) flakes[i] = { x: Math.random() * w, y: 0, r: f.r, d: f.d };
    });
  }

  function animate() {
    drawFlakes();
    requestAnimationFrame(animate);
  }

  window.addEventListener('resize', init);
  init(); animate();

  // Copy Link
  function copyLink() {
    navigator.clipboard.writeText(window.location.href).then(() => {
      const msg = document.getElementById('copied');
      msg.classList.remove('hidden');
      setTimeout(() => msg.classList.add('hidden'), 3000);
    });
  }

  // Music
  const music = document.getElementById('bg-music');
  const musicBtn = document.getElementById('music-btn');
  let musicPlaying = false;

  function toggleMusic() {
    if (!musicPlaying) {
      music.play().then(() => {
        musicPlaying = true;
        musicBtn.textContent = "üîä";
      }).catch(err => console.log("Autoplay failed", err));
    } else {
      music.pause();
      musicPlaying = false;
      musicBtn.textContent = "üîá";
    }
  }

  // Hide/Show Buttons
  function hideButtons() {
    document.getElementById('buttons').classList.add('hidden');
    document.getElementById('showBtn').classList.remove('hidden');
  }

  function showButtons() {
    document.getElementById('buttons').classList.remove('hidden');
    document.getElementById('showBtn').classList.add('hidden');
  }
</script>

</body>
</html>
